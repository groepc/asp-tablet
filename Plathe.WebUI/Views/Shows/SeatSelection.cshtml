@model Plathe.Domain.Entities.Show

@{
    ViewBag.Title = "Voorstelling " + Model.Movie.Title;
}

<div class="row">
    <div class="col-sm-12">
        <h2>Voorstelling @Html.DisplayFor(model => model.Movie.Title)</h2>
    </div>
</div>

<div class="row">
    <div class="col-sm-3">
        <h3>Informatie</h3>
        <dl>
            <dt><img src="@Html.DisplayFor(model => model.Movie.Image)" /></dt>
            <dt>@Html.DisplayNameFor(model => model.Movie.Title)</dt>
            <dd>@Html.DisplayFor(model => model.Movie.Title)</dd>
            <dt>@Html.DisplayNameFor(model => model.Subtitle)</dt>
            <dd>@Html.DisplayFor(model => model.Subtitle)</dd>
            <dt>@Html.DisplayNameFor(model => model.StartingTime)</dt>
            <dd>@Html.DisplayFor(model => model.StartingTime)</dd>
            <dt>@Html.DisplayNameFor(model => model.ThreeDimensional)</dt>
            <dd>@Html.DisplayFor(model => model.ThreeDimensional)</dd>
        </dl>
    </div>

    <div class="col-sm-9">
        <h3>Stap 2: Kies uw stoel</h3>
        <div class="screen">
            <hr />
            Scherm
        </div>
        <form action="/" method="post">
            <table class="table table-seats">
                <tbody>
                    @foreach (var row in Model.Room.Rows)
                    {
                        <tr data-row-id="@row.RowID">
                            @foreach (var seat in row.Seats)
                            {
                                <td>
                                    @if (seat.Reserved)
                                    {
                                        <span class="seat @(seat.PrioritySeat ? "priority-seat" : "") @(seat.Reserved ? "reserved" : "not-reserved")">
                                            <i class="glyphicon glyphicon-stop"></i>
                                        </span>
                                    }
                                    else
                                    {
                                        <label for="seat-@(seat.SeatID)" class="seat-label" data-row-id="@(row.RowID)" data-seat-id="@(seat.SeatID)">
                                            <input type="checkbox" id="seat-@(seat.SeatID)" name="seat-@(seat.SeatID)" class="seat-input">
                                            <span class="seat @(seat.PrioritySeat ? "priority-seat" : "") @(seat.Reserved ? "reserved" : "not-reserved")">
                                                <i class="glyphicon glyphicon-stop"></i>
                                            </span>
                                        </label>
                                    }
                                </td>
                            }
                        </tr>
                    }
                </tbody>
            </table>
            <hr />
            <table class="table table-bordered table-legend">
                <tr>
                    <td>Legenda:</td>
                    <td class="premium">Premium stoelen</td>
                    <td class="normal">Normale stoelen</td>
                    <td class="reserved">Bezet</td>
                    <td class="selection">Uw selectie</td>
                </tr>
            </table>
        </form>
    </div>
</div>
<div class="row">
    <div class="col-sm-12">
        <p>@Html.ActionLink("Terug naar voorstellingen", "Index")</p>
    </div>
</div>

<script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
<script>
    jQuery(document).ready(function ($) {
        var totalSeats = @(ViewBag.TotalAmount);

        $('table').on('click', 'label', function () {
            console.log('row ID', $(this).data('row-id'), 'seat ID', $(this).data('seat-id'));
            //console.log($(this), totalSeats);
        });
    });
</script>